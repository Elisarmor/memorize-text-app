<div class="container">
	<div class="content">
		<h1>Text Memorizer</h1>

		<label>
			Google Sheets share link
			<input
				type="text"
				bind:value="sheetUrl"
				on:change="loadSheet(sheetUrl)"
				placeholder="https://docs.google.com/spreadsheets/d/1C6EBjsS-FY6KPzKnHCVFEcpYy_Gh_bvAJWcma50Qwrw/edit?usp=sharing"
			>
		</label>

		<hr>

		<p>
			<a href="{ asr.makePath('workbook', { key: '1C6EBjsS-FY6KPzKnHCVFEcpYy_Gh_bvAJWcma50Qwrw' }) }">Try an example deck</a>
		</p>

		{#if error}
			<div style="color: var(--red)">Error: {error}</div>
		{/if}
	</div>
</div>

<script>
import sheetsy from 'sheetsy'

const { urlToKey } = sheetsy

export default {
	data() {
		return {
			sheetUrl: ``,
		}
	},
	methods: {
		loadSheet(url) {
			try {
				const key = urlToKey(url)
				this.fire(`keySelected`, key)
			} catch (error) {
				this.set({
					error,
				})
			}
		},
	},
}
</script>
